<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="X-UA-Compatible"
	content="IE=edge;IE=11;IE=10;IE=9;IE=8;" />
<title>项目维护</title>
<meta name="author" content="ip">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="/df/trd/ip/css/reset.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/bootstrap/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/uui/css/u.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/uui/css/tree.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/ip/changeTree/changeTree.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/uui/css/grid.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/ip/css/ip.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/ip/css/platform.css" />
<link rel="stylesheet" type="text/css" href="/df/trd/ip/css/bizSys.css" />
<link rel="stylesheet" type="text/css" href="./projectManage.css" />
</head>

<body>
	<div class = "wrapper">
		<div id="" class="">
			<div class="">
				<div class="row">
					<!-- <div class='tree-block col-md-2'>
						<div class="input-group ip-input-group">
				            <input id="tree-query-val" type="text" class="form-control col-md-6" style="height: 30px;padding-left: 2px;" placeholder="请输入关键字">
				            <span class="input-group-btn">
				                <button class="btn btn-default" type="button" style="padding:6px 7px;">
				                    <span class="glyphicon glyphicon-search search-state" data-bind="click: treeQuery" style="color:#1296DB;"></span>               
				                </button>
				            </span>
				        </div>
						<div class="menuTree view-tree">
							<p id="toggle-btn" style="margin-top: 10px; margin-bottom: 0px; cursor: pointer;">
								<span id="toggle-cla" class="glyphicon glyphicon-triangle-bottom" style="margin-right:5px;"></span>全部
								<span id="toggle-cla" class="toggle-icon"></span>全部
							</p>
							<div id="manageTree" style="padding-top: 0;" class="ztree"
								u-meta='{"id":"manageTree1","data":"treeDataTable","type":"tree","idField":"chr_id","pidField":"parent_id","nameField":"codename","setting":"treeSetting"}'></div>
						</div>
					</div> -->
					<div class = 'col-md-10'>
						<div class="manege-header">
							<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addBudgetItem" data-whatever="0">新增</button>
							<button type="button" class="btn btn-primary" data-bind="click:editBudgetItem">修改</button>
							<button data-bind="click:delBudgetItem" type="button" class="btn btn-danger">删除</button>
							<button data-bind="click:queryByCondition" id="query-btn" type="button" class="btn btn-primary">查询</button>
							<div class="col-md-4 query-container" id="query-code-container">
						        <label for="" class="col-md-3 text-right">项目编码:</label>
						            <div class="col-md-8 ip-input-group">
						                <input id="query-code" type="text" class="form-control" value="">
						            </div>
						    </div>
							<div class="col-md-4 query-container" id="query-name-container">
						        <label for="" class="col-md-3 text-right">项目名称:</label>
						            <div class="col-md-8 ip-input-group">
						                <input id="query-name" type="text" class="form-control" value="">
						            </div>
						    </div>
						    
						    
						    
						</div>
						
						<div type="text" class = "menu-grid"
							u-meta='{"id":"manage-grid","data":"gridDataTable","type":"grid","editable":false,"autoExpand":false,"showTree":false,"showNumCol":true,"keyField":"theId","parentKeyField":"parentId"}'>
							<div
								options='{"field":"set_year","dataType":"String","title":"业务年度","width": 80}'></div>
							<div
								options='{"field":"chr_code","dataType":"String","title":"显示码","width": 150}'></div>
							<div
								options='{"field":"disp_code","dataType":"String","title":"预留","width": 100}'></div>
							<div
								options='{"field":"chr_name","dataType":"String","title":"显示名","width": 180}'></div>
							<div
								options='{"field":"level_num","dataType":"String","title":"级次","width": 60}'></div>
							<div
								options='{"field":"is_leaf","datasource":"is_leaf","renderType":"comboRender","dataType":"String","title":"是否叶节点","width": 90}'></div>
							<div
								options='{"field":"enabled","datasource":"enabled","renderType":"comboRender","dataType":"String","title":"是否启用","width": 80}'></div>
							<div
								options='{"field":"create_date","dataType":"String","title":"创建时间","width": 150}'></div>
							<!-- <div
								options='{"field":"create_user","dataType":"String","title":"创建用户","width": 150}'></div> -->
							<div
								options='{"field":"latest_op_date","dataType":"String","title":"最后修改时间","width": 150}'></div>
							<div
								options='{"field":"is_deleted","datasource":"is_deleted","renderType":"comboRender","dataType":"String","title":"是否删除","width": 80}'></div>
							<!-- <div
								options='{"field":"latest_op_user","dataType":"String","title":"最后修改用户","width": 120}'></div> -->
							<div
								options='{"field":"last_ver","dataType":"String","title":"最后版本","width": 120}'></div>
							<div
								options='{"field":"chr_code1","dataType":"String","title":"父级一","width": 150}'></div>
							<div
								options='{"field":"chr_code2","dataType":"String","title":"父级二","width": 150}'></div>
							<div
								options='{"field":"chr_code3","dataType":"String","title":"父级三","width": 150}'></div>
							<div
								options='{"field":"chr_code4","dataType":"String","title":"父级四","width": 150}'></div>
							<div
								options='{"field":"chr_code5","dataType":"String","title":"父级五","width": 150}'></div>
							<div
								options='{"field":"rg_code","dataType":"String","title":"区域","width": 120}'></div>
							<div
								options='{"field":"parent_id","dataType":"String","title":"父级id","width": 150}'></div>
							<div
								options='{"field":"parent_name","dataType":"String","title":"父级名称","width": 150}'></div>
							<div
								options='{"field":"start_date","dataType":"String","title":"开始时间","width": 150}'></div>
							<div
								options='{"field":"end_date","dataType":"String","title":"结束时间","width": 120}'></div>
							<div
								options='{"field":"public_sign","datasource":"public_sign","renderType":"comboRender","dataType":"String","title":"是否共用项目","width": 110}'></div>
						</div>
						<div id='pagination' class='u-pagination' u-meta='{"type":"pagination","data":"gridDataTable","pageList":[20,50,100,200,500],"sizeChange":"sizeChangeFun","pageChange":"pageChangeFun"}'></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- addButtonModal -->
	<div class="modal fade" id="addBudgetItem" tabindex="-1"
		role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">
						<!-- <span class="glyphicon glyphicon-list" style="color:#1296DB;"></span> -->
						<span id="project-title" style="padding-left:5px;">新增预算项目</span>
					</h4>
				</div>
				<div class="modal-body clearfix">
					<div class="form-group clearfix">
						<label  class="col-md-3 control-label"><span style="color:#d9534f;">*</span>项目编码:</label>
						<div class="col-md-9">
							<input type="text" name="" class="form-control" id="pro-code">
						</div>
					</div>
					<div class="form-group clearfix">
						<label  class="col-md-3 control-label"><span style="color:#d9534f;">*</span>项目名称:</label>
						<div class="col-md-9">
							<input type="text" class="form-control" id="pro-name">
						</div>
					</div>
					<div class="form-group clearfix">
						<!-- <label  class="col-md-3 control-label">指定父级:</label>
						<div class="col-md-9 input-other">
							<input type="text" class="form-control" id="belong-parent" >
							<span class="glyphicon glyphicon-option-horizontal icon-other" data-toggle="modal" data-target="#addChoiceModel" data-whatever="pa"></span>
						</div> -->
						<label class="col-sm-3 control-label">指定父级:</label>
						<div class="input-group col-sm-9 modal-input-group">
							<input id="belong-parent" type="text" class="form-control" value="" readonly="readonly"> 
							<span class="input-control-feedback" onclick="clearText('belong-parent')">X</span>
							<span class="input-group-addon"  data-toggle="modal" data-target="#addChoiceModel" data-whatever="pa">
								<span class="glyphicon glyphicon-option-horizontal"></span> 
							</span>
						</div>
						
					</div>
					<div class="form-group clearfix">
						<label  class="col-md-3 control-label">是否共用项目:</label>
						<div class="col-md-9">
							<select class="form-control" id = "is-public">
								<option value="0">否</option>
								<option value="1">是</option>
							</select>
						</div>
					</div>
					<div class="form-group clearfix">
						<label  class="col-md-3 control-label">是否启用:</label>
						<div class="col-md-9">
							<select class="form-control" id = "is-use">
								<option value="1">是</option>
								<option value="0">否</option>
							</select>
						</div>
					</div>
					<div class="form-group clearfix">
						<label  class="col-md-3 control-label"><span style="color:#d9534f;">*</span>项目分类:</label>
						<div class="col-md-9 input-other">
							<input type="text" class="form-control" id="belong-project" disabled>
							<span onclick="refreshTree(this)" name="manageTreePro" class="glyphicon glyphicon-option-horizontal icon-other"data-toggle="modal" data-target="#addChoiceModel" data-whatever="pro"></span>
						</div>
					</div>
					<div class="form-group clearfix">
						<label  class="col-md-3 control-label"><span style="color:#d9534f;">*</span>业务处室:</label>
						<div class="col-md-9 input-other">
							<input type="text" class="form-control" id="belong-firm" disabled>
							<span onclick="refreshTree(this)" name="manageTreeSer" class="glyphicon glyphicon-option-horizontal icon-other"data-toggle="modal" data-target="#addChoiceModel" data-whatever="ser"></span>
						</div>
					</div>
					<div class="form-group clearfix">
						<!-- <label  class="col-md-3 control-label"><span style="color:#d9534f;">*</span>预算单位:</label>
						<div class="col-md-9 input-other">
							<input type="text" class="form-control" id="belong-unit" disabled>
							<span onclick="refreshTree(this)" name="manageTreeUnit" class="glyphicon glyphicon-option-horizontal icon-other"data-toggle="modal" data-target="#addChoiceModel" data-whatever="unit"></span>
						</div> -->
						<label class="col-sm-3 control-label"><span style="color:#d9534f;">*</span>预算单位:</label>
						<div class="input-group col-sm-9 modal-input-group">
							<input id="belong-unit" type="text" class="form-control" value="" readonly="readonly"> 
							<span class="input-control-feedback" onclick="clearText('belong-unit')">X</span>
							<span class="input-group-addon"  onclick="refreshTree(this)" name="manageTreeUnit" data-toggle="modal" data-target="#addChoiceModel" data-whatever="unit">
								<span class="glyphicon glyphicon-option-horizontal"></span> 
							</span>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary"  data-bind="click:sureItem" >确定</button>
					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
				</div>
			</div>
		</div>
	</div>
	<!-- addChoiceModel -->
	<div class="modal fade" id="addChoiceModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">
						<!-- <span class="glyphicon glyphicon-list" style="color:#1296DB;"></span> -->
						<span style="padding-left:5px;">内容选择</span>
					</h4>
				</div>
				<div class="modal-body">
				    <div class="">
						<label for="addviewInput" >模糊查询:</label>
						<input type="text" name="addviewInput" id="addviewInput" class="addviewInput" />
					    <button type="button" class="btn btn-primary quik-find" data-bind="click: viewQuery">查找</button>
				        <button type="button" class="btn btn-primary quik-next" data-bind="click: viewNext">下一个</button>
					</div>
					<div class = "view-Tree">
					    <div id="manageTreePa" class="ztree"
                         	u-meta='{"id":"manageTreePa","data":"treeDataTable","type":"tree","idField":"chr_id","pidField":"parent_id","nameField":"codename","setting":"treePaSetting"}'></div>
						<div id="manageTreeSer" class="ztree"
                         	u-meta='{"id":"manageTreeSer","data":"treeSerDataTable","type":"tree","idField":"chr_id","pidField":"parent_id","nameField":"chr_name","setting":"treeSerSetting"}'></div>
						<div id="manageTreeSer" class="ztree"
                         	u-meta='{"id":"manageTreePro","data":"treeProDataTable","type":"tree","idField":"chr_id","pidField":"parent_id","nameField":"chr_name","setting":"treeProSetting"}'></div>
                         <div id="manageTreeSer" class="ztree"
                         	u-meta='{"id":"manageTreeUnit","data":"treeUnitDataTable","type":"tree","idField":"chr_id","pidField":"parent_id","nameField":"codename","setting":"treeUnitSetting"}'></div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary"  data-bind="click: sureNode" >确定</button>
					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
				</div>
			</div>
		</div>
	</div>
</body>
<script src="/df/trd/requirejs/require.js"></script>
<script src="/df/require.config.js"></script>
<script src="./projectManage.js"></script>
</html>
